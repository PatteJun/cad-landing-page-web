---
import { content } from '../store/language';
const initialContent = content.get();
---

<div id="autoscout24-banner" class="bg-[#FEF3C7] py-2 px-4 fixed top-0 left-0 right-0 z-50">
  <div class="max-w-7xl mx-auto flex items-center justify-center">
    <div class="flex items-center gap-2 text-center pr-8">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" fill="none" class="shrink-0 text-[#333]">
        <g fill="currentColor" clip-path="url(#banner_svg__a)">
          <path d="m19.302 11.279-.43 1.61-3.22-.864.431-1.61zm.56-3.602-3.219.862-.431-1.61 3.22-.862zM17.09 3.013 14.73 5.37 13.552 4.19l2.357-2.356zM11.94 4.614 5.375 8.466l.024.041-.154.091.317 1.186.75 2.795 6.045.027-1.466-5.471 1.492-.875 2.15 8.023-7.774-.036.961 3.586-1.61.431L5.03 14.24l-.806.216-.25.053a2.5 2.5 0 0 1-2.734-1.578l-.078-.243-.431-1.61a2.5 2.5 0 0 1 1.767-3.062l.805-.215 8.208-4.788zM2.93 9.626a.833.833 0 0 0-.588 1.02l.431 1.61a.833.833 0 0 0 1.02.59l.805-.216-.862-3.22z"></path>
        </g>
        <defs>
          <clipPath id="banner_svg__a">
            <path fill="#fff" d="M0 .182h20v20H0z"></path>
          </clipPath>
        </defs>
      </svg>
      <div class="text-[#333] text-sm font-normal text-left" id="banner-text">
        <span>{initialContent.autoScout24Banner?.line1 || ''}</span><br />
        <span>{initialContent.autoScout24Banner?.line2 || ''}</span><br />
        <span class="font-bold">{initialContent.autoScout24Banner?.line3 || ''}</span><br />
        <span>{initialContent.autoScout24Banner?.line4 || ''}</span><br />
        <span>{initialContent.autoScout24Banner?.phone || ''}</span><br />
        <span>{initialContent.autoScout24Banner?.email || ''}</span>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" width="111" height="27" fill="none" class="shrink-0 ml-2">
        <path fill="#fff" d="M.1 25.14a.58.58 0 0 1 .082-.364c.008-.02.026-.005.033-.026a.4.4 0 0 0 .025-.126 1 1 0 0 0-.04-.213 1 1 0 0 1-.022-.48.7.7 0 0 0 0-.292 1 1 0 0 0-.103-.313 1 1 0 0 1-.072-.176.4.4 0 0 1 0-.11 1 1 0 0 1 .119-.141c.022-.02.053.01.07-.024.031-.066-.017-.143-.014-.221v-.046a1.2 1.2 0 0 0-.042-.358c-.017-.049-.016-.153.019-.168.034-.015.033-.094.01-.182A3 3 0 0 1 .12 21.7a.9.9 0 0 1-.036-.232c.007-.02.021.01.03.01s.019-.013.025-.048.023-.15.047-.153c.04-.007.044-.265.081-.33A.93.93 0 0 0 .31 20.5c-.012-.247-.013-.246.036-.397a.3.3 0 0 0 .016-.067c.013-.092.039-.11.07-.1a.1.1 0 0 0 .045 0c.04-.01.049-.064.018-.149a3 3 0 0 0-.126-.25.7.7 0 0 1-.07-.17 1 1 0 0 1-.01-.235.03.03 0 0 1 .015-.022.03.03 0 0 1 .027-.003c.02.011.042.085.054-.014a.24.24 0 0 0-.03-.165c0-.009-.006-.022-.01-.033-.041-.136-.04-.202.01-.257a.4.4 0 0 0 .057-.284c0-.09 0-.187-.011-.269-.017-.11 0-.11.024-.11a.06.06 0 0 0 .041-.047.8.8 0 0 0-.027-.157c-.012-.055-.03-.099-.044-.153a.4.4 0 0 1 0-.085l.023.031c.025.026.051.067.076.074.024.007.044-.044.043-.069a.7.7 0 0 0-.03-.19c-.064-.079-.075-.26-.083-.404-.009-.177-.038-.274-.085-.32s-.028-.087-.008-.126a.6.6 0 0 0 .035-.331c-.008-.07-.016-.177.024-.193.04-.015.048-.13.03-.231-.03-.155 0-.118.028-.123.029-.004.042-.008.051-.042a.74.74 0 0 0-.047-.325 1 1 0 0 1-.09-.125.7.7 0 0 1-.02-.13c.01 0 .024-.02.032 0 .059.093.094-.051.14-.08a.3.3 0 0 0 .008-.097 1 1 0 0 0-.03-.154c-.02-.087-.053-.157 0-.226a.25.25 0 0 0-.015-.22 1 1 0 0 1-.06-.139 1 1 0 0 1-.022-.13c.015-.015.029-.037.043-.044.015-.007.036.011.051 0a.1.1 0 0 0 .038-.07.6.6 0 0 0-.014-.163c-.07-.11-.058-.298-.044-.435a.47.47 0 0 0-.022-.245 1 1 0 0 1-.016-.11q.019 0 .036.01c.009.008.018.033.027.04.008.008.012-.031.012-.034-.027-.103-.017-.269-.076-.32-.06-.053-.074-.196-.072-.332s.033-.178.065-.184c.06-.012.072-.11.07-.276 0-.166.013-.197.069-.198s.07-.048.033-.22a.6.6 0 0 0-.039-.111.24.24 0 0 1-.013-.166.5.5 0 0 0-.02-.308 1 1 0 0 1-.043-.122c-.013-.043-.016-.074-.023-.11a.3.3 0 0 1 .009-.14c.019-.032.039-.06.056-.095a.2.2 0 0 0 .015-.11v-.08a1 1 0 0 1-.01-.258q.004-.107.023-.214a.12.12 0 0 0-.011-.085l-.013-.032c.016-.05.016-.147.045-.164a.232.232 0 0 0 .03-.153l-.02-.211a1 1 0 0 0 .01-.14.2.2 0 0 0 0-.093v-.04c0-.062-.006-.122-.01-.165a2 2 0 0 1-.011-.202c0-.14.152-.33.122-.431-.013-.048-.03-.089-.042-.138-.033-.13-.03-.134.012-.203a.2.2 0 0 0 .028-.1.6.6 0 0 0-.03-.15C.62 7.277.574 7.188.532 7.09c-.025-.06.11-.235.117-.337a1.6 1.6 0 0 0-.019-.426c-.046-.11-.025-.093-.071-.21 0 0 .144-.302.13-.397a1 1 0 0 1 .04-.077.14.14 0 0 0 .02-.051.18.18 0 0 0-.053-.203s-.205-.386.02-.462l.055-.093.03-.128a1 1 0 0 1 .11-.29l.027-.026c.018-.016.06-.018.082-.024a.1.1 0 0 0 .05-.02.3.3 0 0 1 .101-.044.2.2 0 0 1 .152.003q.018.008.038.011s.127.02.295.065C7.709 5.987 28.776 4.22 42.913.275c.361-.1.954-.24 1.077-.27.122-.031.04.105-.093.216-.087.073-.527.148-.552.169q-.04.032-.033.052c.09.208.644-.008.865-.036s.207.07.08.151c-.194.124-.242.289-.156.37.018.018.059.012.075.031.017.019.064.076.055.102a.35.35 0 0 1-.097.145.275.275 0 0 0-.057.351.18.18 0 0 1 0 .221c-.058.092-.687.339-.79.382a1 1 0 0 0-.22.11c-.018.015-.037.081-.027.088.086.054.744-.235.836-.195.048.022.829-.232.486.015-.076.054-.323.273-.316.33l-.006.034c-.013.093-.01.184-.101.254a.075.075 0 0 0 0 .114q.017.014.04.017c.11.033.072.082.018.14-.11.12-.48.285-.588.409-.011.013-.009.036-.013.055.02 0 .053.014.062.006.058-.066.135-.031.211-.063.17-.074.603-.232.663-.287.11-.104.275-.046.163.133-.035.059-.07.019-.104.123a.7.7 0 0 1-.118.141c-.074.08-.137.166-.053.232.125.1.116.22.092.348-.034.18-.037.18.072.309q.024.024.038.055a.15.15 0 0 0 .158.098q.051 0 .1.012c.092.02.11.064.038.11q-.135.08-.278.142a.5.5 0 0 0-.162.102c-.032.042-.075.136-.03.173.075.06.34-.07.374-.071s.095-.05.123.029c.027.078-.579.254-.624.278l-.026.02c-.097.088.087.111.212.141.11.023.447-.11.382-.037-.024.027-.22.122-.24.187-.03.095-.11.063-.11.094a.8.8 0 0 1-.03.198c-.04.077 0 .08.054.091.035.007-.007.076-.008.09a.2.2 0 0 1-.052.111c-.03.038-.074.064-.105.1-.01.013 0 .042 0 .065.018 0 .442-.126.463-.13a.8.8 0 0 1 .195-.038c.035 0 .168-.02.09.078-.03.039-.01.021-.15.084s-.128.053-.528.331q-.14.085-.264.191c-.049.042.01.117.11.07.286-.128.894-.287.85-.187-.056.122-.169.205-.207.321-.048.144-.145.099-.191.13a.104.104 0 0 0 .048.17c.11.03.044.125 0 .195-.07.11.006.088.065.101.04.01.367-.055.387-.026.036.054-.24.19-.331.22a.6.6 0 0 0-.272.163c-.013.04-.07.126-.049.128q.132-.006.261-.03c.248-.022.27-.126.4-.11.099.012-.181.082-.253.22-.054.111-.097.086-.125.111-.05.057-.123.1 0 .169.076.042.193.096.11.135a.13.13 0 0 0-.062.133c0 .038.08 0 .163.046q.078.017.159.025a1 1 0 0 1 .098.022c.033.013.146.016.15.043s-.155.12-.18.13c-.121.046-.319.18-.311.3 0 .036.38-.173.466-.123s-.137.04-.188.169c-.06.152-.285.127-.294.154a.16.16 0 0 1-.061.07c-.021.015-.027.054-.038.081a1 1 0 0 0 .08 0c.023 0 .042-.02.064-.022s.027.028.026.03c-.062.069-.22.147-.18.214.015.027.155-.053.258-.076.16-.035.139-.085.22-.09.082-.004.153-.071.124 0a.14.14 0 0 1-.11.068c-.066.01-.098.077-.083.077.065 0 .168.02.168.049 0 .05.069.024.097.05.027.025.22-.11.21.017a.53.53 0 0 1-.283.276c-.065.031-.256.11-.26.204 0 .132.562-.007.691.012.13.02.161.061.072.175a.3.3 0 0 1-.09.073c-.055.03-.068.06-.032.119.053.09.01.156-.07.209q-.09.06-.165.136c-.02.02-.02.058-.03.088a.3.3 0 0 0 .096.016q.092-.029.188-.042c.11 0 .11.027.074.133a.4.4 0 0 0-.027.145.32.32 0 0 1-.123.245c-.032.031-.07.057-.098.089-.077.087-.074.09.025.157.028.018.063.057.06.083a.16.16 0 0 1-.062.11c-.095.064.342-.05.442.281.01.11.373.171.304.22-.11.072-.236.111-.342.182a.5.5 0 0 0-.127.184.6.6 0 0 0 .092.07c.017.015.04.027.047.046a.25.25 0 0 0 .242.146q.084.021.16.065a1 1 0 0 1-.142.13c-.06.033-.14.037-.202.069-.063.032.068.05.036.1a.24.24 0 0 0-.008.16c0 .01.075.006.11.013.036.008.06.014.066.03a.11.11 0 0 1-.007.09c-.027.033-.259.066-.29.098-.065.068-.057.131.032.164.213.08.48.221.375.396-.047.08-.006.066.035.077.04.01.056 0 .082.012.079.02.083.046.023.11-.04.04-.273.125-.308.168-.008.01-.8.378.015.128.013 0 .102-.037.173-.067.055-.023.151-.036.215-.06.036-.015.088.028.1.067s-.013.094-.076.11a.14.14 0 0 0-.09.058c-.042.098-.145.164-.14.292 0 .038-.074.091-.125.118a.3.3 0 0 0-.06.043c0 .02-.01.04-.014.062q.013.016.031.026c.11.06.083.137.069.22-.011.066.275-.07.37-.044a.09.09 0 0 1 .074.064.09.09 0 0 1-.027.095c-.066.078-.033.078.04.089.044.007.119.037.12.057a.5.5 0 0 1-.046.187c-.011.024-.054.038-.085.049-.068.025-.137.043-.203.07a.06.06 0 0 0-.027.051c0 .012.035.034.043.03.11-.059.19.025.277.067.047.022-.275.136-.152.188.097.042.1-.029.159-.027.131 0-.035.11-.246.12-.12.006-.167.135-.194.156-.047.038-.035.126.211.029.11-.045.466.134.347.178-.011 0-.184.11-.19.121-.039.05-.11.05-.038.122.047.02.017.077.064.096.02.007.124.005.142.015.035.02.19-.166.234-.069.016.038-.244.23-.278.254-.075.053-.264.137-.331.221-.021.028.17-.036.194-.053a.14.14 0 0 1 .186.013c.006.024-.299.11-.38.221-.03.042-.032.092-.08.128-.047.037-.072.063.013.085.028.008.447-.13.6-.11.154.02.01.1-.015.125s-.032.205-.051.22c-.041.036-.16.11-.182.157-.052.12.793.22.657.285C22.516 30.016.615 25.408.093 25.19a.1.1 0 0 0 .008-.05"></path>
        <path fill="#333" d="M94.916 18.744q.4-.312.804-.623c2.479-1.908 5.042-3.883 5.042-6.768 0-2.26-1.631-3.84-3.967-3.84-2.05 0-4.26 1.374-4.26 4.388q0 .205.025.409l1.673-.646c0-1.656 1.234-2.525 2.453-2.525 1.184 0 2.378.752 2.378 2.428 0 2.178-2.223 3.882-5.298 6.242q-.66.505-1.366 1.054l-.028.022v1.606h8.736v-1.747zm-41.651-5.636-.151-.06c-1.377-.553-2.352-1.043-2.352-2.276 0-1.214.967-1.849 1.922-1.849.773 0 1.748.41 2.128 1.306l1.62-.626-.024-.06c-.638-1.584-2.318-2.294-3.705-2.294-1.814 0-3.766 1.143-3.766 3.656 0 2.452 1.876 3.217 3.388 3.831l.186.076c1.545.636 2.553 1.147 2.553 2.403 0 1.303-1.094 1.886-2.178 1.886s-2.352-.572-2.73-2.177l-.016-.07-1.719.652c.518 2.004 2.228 3.292 4.391 3.292 1.089 0 2.098-.331 2.852-.935.85-.68 1.299-1.655 1.299-2.812 0-2.47-1.965-3.253-3.698-3.943m18.194-2.26c-2.68 0-4.626 2.076-4.626 4.935 0 2.86 1.946 4.938 4.626 4.938s4.626-2.076 4.626-4.937-1.946-4.937-4.626-4.937m2.928 4.937c0 2.186-1.463 3.33-2.91 3.33-1.464 0-2.946-1.144-2.946-3.33 0-1.919 1.24-3.312 2.947-3.312 1.685 0 2.91 1.392 2.91 3.312m8.787.712c0 1.736-1.273 2.672-2.47 2.672-.912 0-1.887-.543-1.887-2.069v-6.015h-1.662V17.1c0 2.673 1.733 3.62 3.216 3.62 1.195 0 2.247-.57 2.792-1.502l.317 1.283h1.353v-9.416h-1.66zm5.99-8.097-1.657.64v2.045H85.93V12.6h1.573v5.16c0 2.576 1.466 2.96 2.34 2.96.416-.005.829-.069 1.226-.189l.052-.014v-1.642l-.11.07c-.239.16-.516.25-.803.264-.662 0-1.044-.48-1.044-1.318v-5.288h1.957v-1.518h-1.957zm19.641 7.234v-3.819l-1.697.656v3.163h-3.809l4.645-7.92h-1.885l-4.914 8.356v1.28h5.963v3.147h1.697V17.35H111v-1.716zm-43.963 2.01a2.72 2.72 0 0 1-2.409 1.452c-1.412 0-2.837-1.03-2.837-3.33 0-1.587.854-3.294 2.727-3.294a2.48 2.48 0 0 1 2.207 1.315l1.587-.606-.03-.061c-.662-1.402-2.096-2.273-3.759-2.273a4.3 4.3 0 0 0-3.055 1.226c-.9.891-1.376 2.175-1.376 3.71 0 3.393 2.319 4.938 4.462 4.938 1.67 0 3.15-.91 3.958-2.435l.032-.06-.013-.006zM10.698 7.472H8.954L3.333 20.497H5.39l1.341-3.222h6.2l1.335 3.222h2.059zm1.532 8.127H7.405l2.418-5.835zm10.338-4.56v5.431c0 1.726-1.266 2.66-2.457 2.66-.905 0-1.877-.54-1.877-2.056v-6.036h-1.689v6.036c0 1.152.341 2.104.994 2.75a3.14 3.14 0 0 0 2.246.89c1.187 0 2.233-.563 2.788-1.48l.31 1.26h1.383v-9.456zm8.072 1.55v-1.55h-1.96V8.346L26.989 9v2.038h-1.575v1.546h1.575v5.147c0 2.592 1.476 2.98 2.356 2.98.416-.003.83-.063 1.23-.18l.063-.019v-1.69l-.135.086a1.57 1.57 0 0 1-.795.26c-.654 0-1.03-.475-1.03-1.304V12.59zm5.318-1.786c-1.366 0-2.539.506-3.394 1.461-.807.903-1.25 2.144-1.25 3.495s.44 2.602 1.25 3.503c.853.951 2.027 1.454 3.394 1.454 2.691 0 4.645-2.085 4.645-4.957s-1.954-4.956-4.645-4.956m.019 8.279c-1.458 0-2.934-1.14-2.934-3.318 0-1.912 1.234-3.3 2.934-3.3 1.678 0 2.896 1.388 2.896 3.3 0 2.174-1.456 3.313-2.89 3.313z"></path>
      </svg>
    </div>
    <button 
      id="close-banner" 
      class="absolute right-4 top-1/2 -translate-y-1/2 p-1 hover:bg-[#333]/10 rounded transition-colors"
      aria-label="Close banner"
    >
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14" class="w-[13px] h-[13px] text-[#333]">
        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M1 13 13 1M1 1l12 12"></path>
      </svg>
    </button>
  </div>
</div>

<script>
  import { content } from '../store/language';
  
  const banner = document.getElementById('autoscout24-banner');
  const closeButton = document.getElementById('close-banner');
  const bannerText = document.getElementById('banner-text');
  
  // Handle close button click - only hide for current session
  if (closeButton && banner) {
    closeButton.addEventListener('click', () => {
      banner.style.transition = 'opacity 300ms ease-out';
      banner.style.opacity = '0';
      setTimeout(() => {
        banner.style.display = 'none';
        // Remove spacer when banner is hidden
        const spacer = document.getElementById('banner-spacer');
        if (spacer) {
          spacer.style.display = 'none';
        }
      }, 300);
    });
  }
  
  // Update banner text when language changes
  content.subscribe(newContent => {
    if (bannerText && newContent.autoScout24Banner) {
      const spans = bannerText.querySelectorAll('span');
      if (spans.length >= 6) {
        spans[0].textContent = newContent.autoScout24Banner.line1 || '';
        spans[1].textContent = newContent.autoScout24Banner.line2 || '';
        spans[2].textContent = newContent.autoScout24Banner.line3 || '';
        spans[3].textContent = newContent.autoScout24Banner.line4 || '';
        spans[4].textContent = newContent.autoScout24Banner.phone || '';
        spans[5].textContent = newContent.autoScout24Banner.email || '';
      }
    }
  });
</script>